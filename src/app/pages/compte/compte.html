<div class="account-main">
  <div class="account-board">
  <div class="account-board-header">
    <div class="account-avatar">
      <img src="/images/user.png" alt="Avatar" />
    </div>
    <div>
      <div class="account-board-name">{{ user?.prenom || '-' }}</div>
      <div class="account-board-email">{{ user?.email || '-' }}</div>
      <span *ngIf="user?.adherent; else notAdherent" class="adherent-ok">Adhérent</span>
      <ng-template #notAdherent>
        <span class="adherent-ko">Non adhérent</span>
        <a class="pay-link" href="/users/pay" *ngIf="!user?.adherent">Payer l’adhésion</a>
      </ng-template>
    </div>
  </div>

  <div class="account-board-actions">
    <button class="btn-compte" (click)="onEdit()">Modifier mon profil</button>
    <button class="btn-compte" (click)="onLogout()">Déconnexion</button>
    <button class="btn-compte btn-danger" (click)="onDeleteAccount()">Supprimer mon compte</button>
  </div>
</div>

  <div class="account-historiques">
    <div class="account-section account-orders-block">
      <h2 style="font-weight: bold;">Historique de mes commandes</h2>
      <table *ngIf="reservations?.length; else noOrders" class="account-orders">
        <thead>
          <tr>
            <th>Date</th>
            <th>Produits</th>
            <th>Statut</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let res of reservations">
            <td>{{ res.date | date:'dd/MM/yyyy HH:mm' }}</td>
            <td>
              {{ res.produits && res.produits !== '' ? res.produits : 'Aucun produit' }}
            </td>
            <td>{{ res.statut }}</td>
          </tr>
        </tbody>
      </table>
      <ng-template #noOrders>
        <p>Aucune commande enregistrée.</p>
      </ng-template>
    </div>
    <div class="account-section account-dons-block">
      <h2 style="font-weight: bold;">Mes dons</h2>
      <table *ngIf="dons?.length; else noDons" class="account-dons">
        <thead>
          <tr>
            <th>Date</th>
            <th>Produit</th>
            <th>Quantité</th>
            <th>Catégorie</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let don of dons">
            <td>{{ don.date_don | date:'dd/MM/yyyy HH:mm' }}</td>
            <td>{{ don.produit }}</td>
            <td>{{ don.quantite }}</td>
            <td>{{ don.categorie_id }}</td>
          </tr>
        </tbody>
      </table>
      <ng-template #noDons>
        <p>Aucun don enregistré.</p>
      </ng-template>
    </div>
  </div>
</div>
